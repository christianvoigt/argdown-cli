{"version":3,"sources":["../../../src/plugins/DotToSvgExportPlugin.js"],"names":["_","DotToSvgExportPlugin","constructor","config","name","defaults","defaultsDeep","format","getSettings","request","dotToSvg","DotToSvgExport","prepare","run","response","dot","svg","module","exports"],"mappings":";;AAAA;;;;AACA;;IAAYA,C;;;;;;AAEZ,MAAMC,oBAAN,CAA2B;AACvBC,gBAAYC,MAAZ,EAAoB;AAChB,aAAKC,IAAL,GAAY,sBAAZ;AACA,aAAKC,QAAL,GAAgBL,EAAEM,YAAF,CAAe,EAAf,EAAmBH,MAAnB,EAA2B;AACvCI,oBAAQ;AAD+B,SAA3B,CAAhB;AAGA,aAAKJ,MAAL,GAAcA,MAAd;AACH;AACDK,gBAAYC,OAAZ,EAAqB;AACjB,YAAIA,QAAQC,QAAZ,EAAsB;AAClB,mBAAOD,QAAQC,QAAf;AACH,SAFD,MAEO,IAAID,QAAQE,cAAZ,EAA4B;AAC/B,mBAAOF,QAAQE,cAAf;AACH,SAFM,MAEA;AACHF,oBAAQC,QAAR,GAAmB,EAAnB;AACA,mBAAOD,QAAQC,QAAf;AACH;AACJ;AACDE,YAAQH,OAAR,EAAiB;AACbT,UAAEM,YAAF,CAAe,KAAKE,WAAL,CAAiBC,OAAjB,CAAf,EAA0C,KAAKJ,QAA/C;AACH;AACDQ,QAAIJ,OAAJ,EAAaK,QAAb,EAAuB;AACnB,YAAI,CAACA,SAASC,GAAd,EAAmB;AACf,mBAAOD,QAAP;AACH;AACDA,iBAASE,GAAT,GAAe,mBAAIF,SAASC,GAAb,EAAkB,KAAKP,WAAL,CAAiBC,OAAjB,CAAlB,CAAf;AACA,eAAOK,QAAP;AACH;AA3BsB;AA6B3BG,OAAOC,OAAP,GAAiB;AACbjB,0BAAsBA;AADT,CAAjB","file":"DotToSvgExportPlugin.js","sourcesContent":["import Viz from \"viz.js\";\nimport * as _ from \"lodash\";\n\nclass DotToSvgExportPlugin {\n    constructor(config) {\n        this.name = \"DotToSvgExportPlugin\";\n        this.defaults = _.defaultsDeep({}, config, {\n            format: \"svg\"\n        });\n        this.config = config;\n    }\n    getSettings(request) {\n        if (request.dotToSvg) {\n            return request.dotToSvg;\n        } else if (request.DotToSvgExport) {\n            return request.DotToSvgExport;\n        } else {\n            request.dotToSvg = {};\n            return request.dotToSvg;\n        }\n    }\n    prepare(request) {\n        _.defaultsDeep(this.getSettings(request), this.defaults);\n    }\n    run(request, response) {\n        if (!response.dot) {\n            return response;\n        }\n        response.svg = Viz(response.dot, this.getSettings(request));\n        return response;\n    }\n}\nmodule.exports = {\n    DotToSvgExportPlugin: DotToSvgExportPlugin\n};\n"]}