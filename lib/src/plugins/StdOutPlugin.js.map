{"version":3,"sources":["../../../src/plugins/StdOutPlugin.js"],"names":["_","StdOutPlugin","constructor","config","name","defaults","defaultsDeep","getSettings","request","settings","stdOut","run","response","content","isRequestData","dataKey","process","stdout","write","module","exports"],"mappings":";;AAAA;;IAAYA,C;;;;AAEZ,MAAMC,YAAN,CAAmB;AACfC,gBAAYC,MAAZ,EAAoB;AAChB,aAAKC,IAAL,GAAY,cAAZ;AACA,aAAKC,QAAL,GAAgBL,EAAEM,YAAF,CAAe,EAAf,EAAmBH,MAAnB,EAA2B,EAA3B,CAAhB;AACH;AACD;AACA;AACA;AACAI,gBAAYC,OAAZ,EAAqB;AACjB,YAAIC,WAAW,EAAf;AACA,YAAID,QAAQE,MAAZ,EAAoB;AAChBD,uBAAWD,QAAQE,MAAnB;AACH;AACDD,mBAAWT,EAAEM,YAAF,CAAe,EAAf,EAAmBG,QAAnB,EAA6B,KAAKJ,QAAlC,CAAX;AACA,eAAOI,QAAP;AACH;AACDE,QAAIH,OAAJ,EAAaI,QAAb,EAAuB;AACnB,cAAMH,WAAW,KAAKF,WAAL,CAAiBC,OAAjB,CAAjB;AACA,YAAIA,QAAQE,MAAZ,EAAoB;AAChB,iBAAKP,MAAL,GAAcK,QAAQE,MAAtB;AACH;AACD,YAAIG,UAAU,CAACJ,SAASK,aAAV,GAA0BF,SAASH,SAASM,OAAlB,CAA1B,GAAuDP,QAAQC,SAASM,OAAjB,CAArE;AACAC,gBAAQC,MAAR,CAAeC,KAAf,CAAqBL,OAArB;AACH;AAvBc;;AA0BnBM,OAAOC,OAAP,GAAiB;AACbnB,kBAAcA;AADD,CAAjB","file":"StdOutPlugin.js","sourcesContent":["import * as _ from \"lodash\";\n\nclass StdOutPlugin {\n    constructor(config) {\n        this.name = \"StdOutPlugin\";\n        this.defaults = _.defaultsDeep({}, config, {});\n    }\n    // there can be several instances of this plugin in the same ArgdownApplication\n    // Because of this, we can not add the instance default settings to the request object as in other plugins\n    // Instead we have to add it each time the getSettings method is called to avoid keeping request specific state\n    getSettings(request) {\n        let settings = {};\n        if (request.stdOut) {\n            settings = request.stdOut;\n        }\n        settings = _.defaultsDeep({}, settings, this.defaults);\n        return settings;\n    }\n    run(request, response) {\n        const settings = this.getSettings(request);\n        if (request.stdOut) {\n            this.config = request.stdOut;\n        }\n        let content = !settings.isRequestData ? response[settings.dataKey] : request[settings.dataKey];\n        process.stdout.write(content);\n    }\n}\n\nmodule.exports = {\n    StdOutPlugin: StdOutPlugin\n};\n"]}